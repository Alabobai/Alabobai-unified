<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reset Password | Alabobai - Ultra Agent V4.0</title>
  <meta name="description" content="Reset your Alabobai password - Ultra Agent V4.0 Enterprise AI Platform">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    /* ============================================================================
       ULTRA AGENT V4.0 - Authentication Design System
       ============================================================================ */

    :root {
      /* Metallic Rose Gold Palette */
      --rose-gold: #d9a07a;
      --rose-gold-light: #ecd4c0;
      --rose-gold-bright: #f0e0d0;
      --rose-gold-dark: #b8845c;
      --rose-gold-deep: #8b6442;
      --copper: #c9956c;
      --bronze: #a67c52;

      /* Glow Effects */
      --glow-rose: rgba(217, 160, 122, 0.6);
      --glow-rose-intense: rgba(217, 160, 122, 0.9);
      --glow-soft: rgba(217, 160, 122, 0.3);

      /* Backgrounds */
      --bg-void: #000000;
      --bg-dark: #0a0808;
      --bg-card: rgba(12, 10, 8, 0.95);
      --bg-panel: rgba(18, 14, 12, 0.9);
      --bg-input: rgba(25, 20, 18, 0.8);

      /* Borders - Multi-layer */
      --border-outer: rgba(217, 160, 122, 0.5);
      --border-mid: rgba(217, 160, 122, 0.3);
      --border-inner: rgba(217, 160, 122, 0.15);
      --border-subtle: rgba(217, 160, 122, 0.08);

      /* Text */
      --text-bright: #f5ebe0;
      --text-primary: #e8d5c4;
      --text-secondary: #a89080;
      --text-muted: #6b5a4a;

      /* Status */
      --status-active: #7dd3a0;
      --status-glow: rgba(125, 211, 160, 0.5);
      --status-error: #e57373;
      --status-error-glow: rgba(229, 115, 115, 0.5);

      /* Typography */
      --font-display: 'Inter', -apple-system, sans-serif;
      --font-mono: 'JetBrains Mono', monospace;

      /* Animations */
      --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
      --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: var(--font-display);
      background: var(--bg-void);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(217, 160, 122, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse 60% 40% at 80% 100%, rgba(217, 160, 122, 0.05) 0%, transparent 50%);
      pointer-events: none;
    }

    /* ============================================================================
       MORPHIC GLASS PANEL
       ============================================================================ */

    .morphic-panel {
      background: var(--bg-card);
      border-radius: 20px;
      position: relative;
      overflow: visible;
    }

    .morphic-panel::before {
      content: '';
      position: absolute;
      inset: -2px;
      border-radius: 22px;
      background: linear-gradient(
        135deg,
        var(--rose-gold) 0%,
        var(--rose-gold-dark) 25%,
        transparent 50%,
        var(--rose-gold-deep) 75%,
        var(--rose-gold) 100%
      );
      z-index: -1;
      opacity: 0.8;
    }

    .morphic-panel::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 20px;
      border: 1px solid var(--border-mid);
      pointer-events: none;
    }

    .morphic-inner {
      position: absolute;
      inset: 3px;
      border-radius: 17px;
      border: 1px solid var(--border-inner);
      pointer-events: none;
    }

    /* ============================================================================
       AUTH CONTAINER
       ============================================================================ */

    .auth-container {
      width: 100%;
      max-width: 440px;
      position: relative;
      z-index: 1;
    }

    .auth-panel {
      padding: 48px 40px;
    }

    /* ============================================================================
       HEADER / BRANDING
       ============================================================================ */

    .auth-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .brand-logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 32px;
    }

    .cpu-icon {
      width: 48px;
      height: 48px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .cpu-icon svg {
      width: 40px;
      height: 40px;
      fill: none;
      stroke: var(--rose-gold);
      stroke-width: 1.5;
      filter: drop-shadow(0 0 12px var(--glow-rose));
    }

    .brand-text {
      display: flex;
      flex-direction: column;
      text-align: left;
    }

    .brand-title {
      font-size: 24px;
      font-weight: 300;
      letter-spacing: 1px;
      color: var(--text-bright);
      text-shadow: 0 0 30px var(--glow-soft);
    }

    .brand-title strong {
      font-weight: 700;
      color: var(--rose-gold-light);
      text-shadow: 0 0 20px var(--glow-rose);
    }

    .brand-version {
      font-size: 10px;
      font-weight: 500;
      letter-spacing: 2px;
      color: var(--text-muted);
      text-transform: uppercase;
      margin-top: 2px;
    }

    /* Lock Icon */
    .lock-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 24px;
      background: var(--bg-input);
      border: 2px solid var(--border-mid);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lock-icon svg {
      width: 32px;
      height: 32px;
      stroke: var(--rose-gold);
      fill: none;
      stroke-width: 2;
      filter: drop-shadow(0 0 10px var(--glow-rose));
    }

    .auth-title {
      font-size: 28px;
      font-weight: 600;
      color: var(--text-bright);
      margin-bottom: 12px;
      text-shadow: 0 0 40px var(--glow-soft);
    }

    .auth-subtitle {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
      max-width: 320px;
      margin: 0 auto;
    }

    /* ============================================================================
       FORM STYLES
       ============================================================================ */

    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .form-label {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.5px;
      color: var(--text-secondary);
      text-transform: uppercase;
    }

    .form-input {
      width: 100%;
      padding: 16px 20px;
      background: var(--bg-input);
      border: 2px solid var(--border-mid);
      border-radius: 12px;
      color: var(--text-bright);
      font-family: var(--font-display);
      font-size: 15px;
      outline: none;
      transition: all 0.3s var(--ease-smooth);
    }

    .form-input::placeholder {
      color: var(--text-muted);
    }

    .form-input:focus {
      border-color: var(--rose-gold);
      box-shadow:
        0 0 30px var(--glow-soft),
        inset 0 0 20px rgba(217, 160, 122, 0.05);
    }

    .form-input:focus::placeholder {
      color: var(--text-secondary);
    }

    .form-input.error {
      border-color: var(--status-error);
      box-shadow: 0 0 20px var(--status-error-glow);
    }

    .form-error {
      font-size: 12px;
      color: var(--status-error);
      display: none;
      align-items: center;
      gap: 6px;
    }

    .form-error.visible {
      display: flex;
    }

    .form-error svg {
      width: 14px;
      height: 14px;
      stroke: var(--status-error);
      fill: none;
    }

    /* ============================================================================
       CHROME METALLIC BUTTON
       ============================================================================ */

    .chrome-btn {
      position: relative;
      width: 100%;
      padding: 18px 40px;
      background: linear-gradient(
        180deg,
        var(--rose-gold-bright) 0%,
        var(--rose-gold-light) 20%,
        var(--rose-gold) 50%,
        var(--rose-gold-dark) 80%,
        var(--bronze) 100%
      );
      border: none;
      border-radius: 12px;
      color: #1a1410;
      font-family: var(--font-display);
      font-size: 16px;
      font-weight: 700;
      letter-spacing: 0.5px;
      cursor: pointer;
      transition: all 0.3s var(--ease-smooth);
      box-shadow:
        0 4px 15px rgba(0, 0, 0, 0.4),
        0 2px 4px rgba(0, 0, 0, 0.3),
        inset 0 2px 0 rgba(255, 255, 255, 0.3),
        inset 0 -2px 0 rgba(0, 0, 0, 0.2);
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3);
      overflow: hidden;
      margin-top: 8px;
    }

    .chrome-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(
        180deg,
        rgba(255, 255, 255, 0.4) 0%,
        rgba(255, 255, 255, 0.1) 100%
      );
      border-radius: 12px 12px 0 0;
    }

    .chrome-btn:hover {
      transform: translateY(-2px);
      box-shadow:
        0 8px 25px rgba(217, 160, 122, 0.4),
        0 4px 10px rgba(0, 0, 0, 0.3),
        inset 0 2px 0 rgba(255, 255, 255, 0.4),
        inset 0 -2px 0 rgba(0, 0, 0, 0.2);
    }

    .chrome-btn:active {
      transform: translateY(0);
      box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.4),
        inset 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .chrome-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    .chrome-btn.loading {
      pointer-events: none;
    }

    .chrome-btn.loading .btn-text {
      opacity: 0;
    }

    .chrome-btn .btn-spinner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 24px;
      height: 24px;
      border: 3px solid rgba(26, 20, 16, 0.3);
      border-top-color: #1a1410;
      border-radius: 50%;
      opacity: 0;
      animation: none;
    }

    .chrome-btn.loading .btn-spinner {
      opacity: 1;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }

    /* Secondary Button */
    .chrome-btn-secondary {
      background: var(--bg-input);
      border: 2px solid var(--border-mid);
      color: var(--text-primary);
      box-shadow: none;
      text-shadow: none;
    }

    .chrome-btn-secondary::before {
      display: none;
    }

    .chrome-btn-secondary:hover {
      border-color: var(--rose-gold);
      background: var(--bg-panel);
      box-shadow: 0 0 30px var(--glow-soft);
    }

    /* ============================================================================
       ALERT MESSAGES
       ============================================================================ */

    .alert {
      padding: 14px 18px;
      border-radius: 10px;
      font-size: 13px;
      display: none;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 20px;
    }

    .alert.visible {
      display: flex;
    }

    .alert.alert-error {
      background: rgba(229, 115, 115, 0.1);
      border: 1px solid rgba(229, 115, 115, 0.3);
      color: var(--status-error);
    }

    .alert.alert-success {
      background: rgba(125, 211, 160, 0.1);
      border: 1px solid rgba(125, 211, 160, 0.3);
      color: var(--status-active);
    }

    .alert svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
      fill: none;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .alert-content {
      flex: 1;
    }

    .alert-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .alert-message {
      font-size: 12px;
      opacity: 0.9;
      line-height: 1.5;
    }

    /* ============================================================================
       SUCCESS STATE
       ============================================================================ */

    .success-view {
      text-align: center;
      display: none;
    }

    .success-view.visible {
      display: block;
    }

    .success-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 24px;
      background: rgba(125, 211, 160, 0.1);
      border: 2px solid rgba(125, 211, 160, 0.3);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: successPulse 2s ease-in-out infinite;
    }

    @keyframes successPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(125, 211, 160, 0.4); }
      50% { box-shadow: 0 0 0 15px rgba(125, 211, 160, 0); }
    }

    .success-icon svg {
      width: 40px;
      height: 40px;
      stroke: var(--status-active);
      fill: none;
      stroke-width: 2;
    }

    .success-title {
      font-size: 24px;
      font-weight: 600;
      color: var(--text-bright);
      margin-bottom: 12px;
    }

    .success-message {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 32px;
    }

    .success-email {
      color: var(--rose-gold-light);
      font-weight: 500;
    }

    .resend-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--text-secondary);
      font-size: 13px;
      margin-top: 16px;
    }

    .resend-link a {
      color: var(--rose-gold);
      text-decoration: none;
      transition: all 0.3s var(--ease-smooth);
    }

    .resend-link a:hover {
      color: var(--rose-gold-light);
      text-shadow: 0 0 15px var(--glow-rose);
    }

    /* ============================================================================
       BACK LINK
       ============================================================================ */

    .back-link {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--border-subtle);
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      transition: all 0.3s var(--ease-smooth);
    }

    .back-link svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
      fill: none;
      transition: transform 0.3s var(--ease-smooth);
    }

    .back-link:hover {
      color: var(--rose-gold-light);
    }

    .back-link:hover svg {
      transform: translateX(-4px);
    }

    /* ============================================================================
       RESPONSIVE
       ============================================================================ */

    @media (max-width: 480px) {
      .auth-panel {
        padding: 36px 24px;
      }

      .auth-title {
        font-size: 24px;
      }

      .brand-title {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="auth-container">
    <div class="morphic-panel auth-panel">
      <div class="morphic-inner"></div>

      <!-- Header -->
      <div class="auth-header">
        <div class="brand-logo">
          <div class="cpu-icon">
            <svg viewBox="0 0 24 24">
              <rect x="4" y="4" width="16" height="16" rx="2" />
              <rect x="9" y="9" width="6" height="6" />
              <line x1="9" y1="1" x2="9" y2="4" />
              <line x1="15" y1="1" x2="15" y2="4" />
              <line x1="9" y1="20" x2="9" y2="23" />
              <line x1="15" y1="20" x2="15" y2="23" />
              <line x1="20" y1="9" x2="23" y2="9" />
              <line x1="20" y1="15" x2="23" y2="15" />
              <line x1="1" y1="9" x2="4" y2="9" />
              <line x1="1" y1="15" x2="4" y2="15" />
            </svg>
          </div>
          <div class="brand-text">
            <div class="brand-title"><strong>Ultra Agent</strong> V4.0</div>
            <div class="brand-version">Alabobai Enterprise Platform</div>
          </div>
        </div>
      </div>

      <!-- Request Form View -->
      <div class="request-view" id="requestView">
        <div class="lock-icon">
          <svg viewBox="0 0 24 24">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
        </div>

        <h1 class="auth-title">Reset Password</h1>
        <p class="auth-subtitle">
          Enter your email address and we'll send you instructions to reset your password.
        </p>

        <!-- Alert Messages -->
        <div class="alert alert-error" id="errorAlert" style="margin-top: 24px;">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
          <div class="alert-content">
            <div class="alert-title">Request Failed</div>
            <div class="alert-message" id="errorMessage">Unable to process your request. Please try again.</div>
          </div>
        </div>

        <!-- Reset Form -->
        <form class="auth-form" id="resetForm" style="margin-top: 32px;">
          <div class="form-group">
            <label class="form-label" for="email">Email Address</label>
            <input
              type="email"
              id="email"
              class="form-input"
              placeholder="you@company.com"
              required
              autocomplete="email"
            >
            <div class="form-error" id="emailError">
              <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
              <span>Please enter a valid email address</span>
            </div>
          </div>

          <button type="submit" class="chrome-btn" id="submitBtn">
            <span class="btn-text">Send Reset Link</span>
            <span class="btn-spinner"></span>
          </button>
        </form>

        <a href="login.html" class="back-link">
          <svg viewBox="0 0 24 24"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
          Back to Sign In
        </a>
      </div>

      <!-- Success View -->
      <div class="success-view" id="successView">
        <div class="success-icon">
          <svg viewBox="0 0 24 24">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        </div>

        <h2 class="success-title">Check Your Email</h2>
        <p class="success-message">
          We've sent password reset instructions to<br>
          <span class="success-email" id="successEmail">your@email.com</span>
        </p>

        <a href="login.html" class="chrome-btn chrome-btn-secondary">
          <span class="btn-text">Return to Sign In</span>
        </a>

        <div class="resend-link">
          Didn't receive the email? <a href="#" id="resendLink">Resend</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Form elements
    const resetForm = document.getElementById('resetForm');
    const submitBtn = document.getElementById('submitBtn');
    const emailInput = document.getElementById('email');
    const emailError = document.getElementById('emailError');
    const errorAlert = document.getElementById('errorAlert');
    const requestView = document.getElementById('requestView');
    const successView = document.getElementById('successView');
    const successEmail = document.getElementById('successEmail');
    const resendLink = document.getElementById('resendLink');

    // Email validation
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    // Clear errors
    function clearErrors() {
      emailInput.classList.remove('error');
      emailError.classList.remove('visible');
      errorAlert.classList.remove('visible');
    }

    // Show error
    function showError(message) {
      emailInput.classList.add('error');
      if (message) {
        emailError.querySelector('span').textContent = message;
      }
      emailError.classList.add('visible');
    }

    // Show success view
    function showSuccess(email) {
      successEmail.textContent = email;
      requestView.style.display = 'none';
      successView.classList.add('visible');
    }

    // Form submission
    resetForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      clearErrors();

      const email = emailInput.value.trim();

      // Validate email
      if (!email) {
        showError('Email is required');
        return;
      }

      if (!validateEmail(email)) {
        showError('Please enter a valid email address');
        return;
      }

      // Show loading state
      submitBtn.classList.add('loading');
      submitBtn.disabled = true;

      try {
        // Simulate API call - replace with actual auth service
        const response = await fetch('/api/auth/forgot-password', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ email }),
        });

        const data = await response.json();

        if (!response.ok) {
          throw new Error(data.message || 'Unable to process your request');
        }

        // Show success view
        showSuccess(email);

      } catch (error) {
        // For security, we might want to show success even on error
        // to prevent email enumeration attacks
        // In this demo, we'll show the success view anyway
        showSuccess(email);
      }
    });

    // Resend link handler
    let resendTimeout = null;
    resendLink.addEventListener('click', async (e) => {
      e.preventDefault();

      if (resendLink.classList.contains('disabled')) return;

      resendLink.classList.add('disabled');
      resendLink.textContent = 'Sending...';

      try {
        const email = successEmail.textContent;

        await fetch('/api/auth/forgot-password', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ email }),
        });

        resendLink.textContent = 'Sent!';

        // Reset after 30 seconds
        if (resendTimeout) clearTimeout(resendTimeout);
        resendTimeout = setTimeout(() => {
          resendLink.classList.remove('disabled');
          resendLink.textContent = 'Resend';
        }, 30000);

      } catch (error) {
        resendLink.textContent = 'Try again';
        setTimeout(() => {
          resendLink.classList.remove('disabled');
          resendLink.textContent = 'Resend';
        }, 3000);
      }
    });

    // Real-time validation
    emailInput.addEventListener('blur', () => {
      if (emailInput.value && !validateEmail(emailInput.value)) {
        showError('Please enter a valid email address');
      }
    });

    emailInput.addEventListener('input', () => {
      if (emailInput.classList.contains('error')) {
        if (validateEmail(emailInput.value)) {
          clearErrors();
        }
      }
    });
  </script>
</body>
</html>
